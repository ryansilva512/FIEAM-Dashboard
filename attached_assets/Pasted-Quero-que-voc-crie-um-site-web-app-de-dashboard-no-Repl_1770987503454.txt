Quero que você crie um site (web app) de dashboard no Replit para analisar “atendimentos finalizados” a partir de um arquivo CSV.

### 1) Stack e requisitos
- Frontend: React + TypeScript (Vite) + Tailwind CSS
- Gráficos: Recharts (ou Chart.js se preferir, mas escolha 1 e mantenha consistente)
- Tabelas: @tanstack/react-table (com paginação/sort/filtro)
- Datas: Luxon (para parsing e dimensões de tempo)
- Tudo deve rodar no Replit com um único botão “Run”.
- Não depender de serviços externos obrigatórios.
- (Opcional) Backend Node/Express só se precisar para upload; se der para fazer tudo no client, ótimo.

### 2) Dataset (colunas disponíveis no CSV)
O CSV terá estas colunas (podem vir com espaços/acentos; trate mapeando nomes):
- id
- contato
- identificador
- protocolo
- canal
- data/hora início
- data/hora fim
- tipo de canal
- resumo da conversa
- casa

### 3) Preparação dos dados (campos calculados)
Ao importar o CSV, gere estes campos derivados:
- duracao_minutos = diferença entre data/hora fim e data/hora início (minutos, número)
- data = apenas a data de data/hora início
- hora = hora (0–23) de data/hora início
- dia_da_semana = seg..dom
- mes = AAAA-MM
- semana = semana do ano (ISO)
- canal_normalizado = `${canal} – ${tipo_de_canal}` (com fallback se algum estiver vazio)
- flag_falta_interacao = true se “casa” contiver “Falta de Interação” (case-insensitive)

### 4) Categorização de tema (a partir de “resumo da conversa”)
Crie um campo “tema” com uma abordagem em camadas:
1) Regras locais por palavras-chave (default), ex:
   - “matrícula”, “inscrição” -> Matrícula
   - “valor”, “preço”, “mensalidade” -> Valores
   - “curso”, “turma”, “horário” -> Dúvida sobre curso
   - “certificado”, “declaração” -> Certificados/Documentos
   - senão -> Outros
2) No UI, permitir o usuário editar/gerenciar essas regras (CRUD simples: nome do tema + lista de keywords).
3) (Opcional) Se existir a variável de ambiente OPENAI_API_KEY, disponibilize um botão “Classificar com IA” que chama um endpoint e sugere temas para linhas sem tema; se não existir, esconda esse botão e use só as regras.

### 5) Layout do Dashboard (páginas/seções)
App com sidebar e 4 páginas:

#### (A) Visão Geral
Topo com cards KPI:
- Total de atendimentos (período filtrado)
- Protocolos únicos
- Duração média (min) + mediana (p50) + p90
- % Falta de Interação
- Top canal (canal_normalizado) e Top casa

Gráficos:
- Série temporal: Atendimentos por dia (com opção empilhada por canal)
- Barras: Atendimentos por canal_normalizado
- Barras: Atendimentos por casa

#### (B) Tempo e Sazonalidade
- Barras: Duração média por canal_normalizado
- Barras: Duração média por casa
- Heatmap Dia da semana x Hora (valor = nº atendimentos iniciados)
- Histograma (ou barras por faixas): distribuição de duracao_minutos (ex.: 0–5, 5–15, 15–30, 30–60, 60+)

#### (C) Temas
- Top 10 temas (barra)
- Matriz canal x tema (pode ser barras empilhadas ou tabela dinâmica)
- Filtro para selecionar um tema e ver evolução diária desse tema

#### (D) Detalhes
Tabela filtrável (drill-down) com colunas:
- protocolo, identificador, contato (opcional ocultável)
- canal_normalizado, casa, tema
- data/hora início, data/hora fim, duracao_minutos
- resumo da conversa
Recursos:
- Busca global (protocolo/identificador/contato/resumo)
- Sort por duração e data
- Exportar CSV do “conjunto filtrado”
- Toggle de colunas sensíveis (contato/identificador)

### 6) Filtros globais (persistentes no topo)
- Intervalo de datas (data/hora início)
- Multi-select: canal_normalizado
- Multi-select: casa
- Multi-select: tema
- Checkbox: “Somente Falta de Interação”
- Botão “Limpar filtros”

### 7) Importação de dados
- Tela inicial: “Importar CSV”
- Aceitar upload (drag & drop) e também um botão “Carregar exemplo”
- Validar colunas e mostrar erros amigáveis (ex.: data inválida)
- Após importar, navegar para Visão Geral
- Armazenar dataset no localStorage para não perder ao recarregar (com botão “Limpar dados”)

### 8) Qualidade e UX
- Responsivo (desktop first)
- Dark mode (opcional, mas bom)
- Loading states
- Sem travar com datasets médios (use memoização e agregações eficientes)
- Código organizado: /components, /pages, /lib (parsing, agregações), /types
- README.md com:
  - como rodar no Replit
  - formato do CSV
  - como funcionam as regras de tema
  - como exportar dados filtrados

### 9) Critérios de aceite
- Eu consigo subir um CSV com essas colunas e ver os KPIs e gráficos funcionando.
- Os filtros globais afetam todas as páginas.
- Duração e dimensões de tempo batem com o cálculo data/hora fim - início.
- “Falta de Interação” aparece como KPI e análises por canal e ao longo do tempo.
- A tabela de detalhes permite auditoria e exportação do recorte filtrado.

Construa o projeto inteiro (arquivos, dependências, scripts) e deixe pronto para eu apertar “Run” no Replit.
